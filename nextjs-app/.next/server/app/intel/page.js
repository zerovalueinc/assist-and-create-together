(()=>{var e={};e.id=477,e.ids=[477],e.modules={669:(e,t,s)=>{"use strict";s.r(t),s.d(t,{GlobalError:()=>a.a,__next_app__:()=>d,pages:()=>p,routeModule:()=>u,tree:()=>l});var r=s(5853),i=s(554),n=s(708),a=s.n(n),o=s(8067),c={};for(let e in o)0>["default","tree","pages","GlobalError","__next_app__","routeModule"].indexOf(e)&&(c[e]=()=>o[e]);s.d(t,c);let l={children:["",{children:["intel",{children:["__PAGE__",{},{page:[()=>Promise.resolve().then(s.bind(s,5331)),"/Users/zchester/Desktop/PersonaOps 2.0/assist-and-create-together/nextjs-app/src/app/intel/page.tsx"]}]},{metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,4638))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]},{layout:[()=>Promise.resolve().then(s.bind(s,5347)),"/Users/zchester/Desktop/PersonaOps 2.0/assist-and-create-together/nextjs-app/src/app/layout.tsx"],"not-found":[()=>Promise.resolve().then(s.t.bind(s,2192,23)),"next/dist/client/components/not-found-error"],forbidden:[()=>Promise.resolve().then(s.t.bind(s,2137,23)),"next/dist/client/components/forbidden-error"],unauthorized:[()=>Promise.resolve().then(s.t.bind(s,8358,23)),"next/dist/client/components/unauthorized-error"],metadata:{icon:[async e=>(await Promise.resolve().then(s.bind(s,4638))).default(e)],apple:[],openGraph:[],twitter:[],manifest:void 0}}]}.children,p=["/Users/zchester/Desktop/PersonaOps 2.0/assist-and-create-together/nextjs-app/src/app/intel/page.tsx"],d={require:s,loadChunk:()=>Promise.resolve()},u=new r.AppPageRouteModule({definition:{kind:i.RouteKind.APP_PAGE,page:"/intel/page",pathname:"/intel",bundlePath:"",filename:"",appPaths:[]},userland:{loaderTree:l}})},846:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/app-page.runtime.prod.js")},1630:e=>{"use strict";e.exports=require("http")},1645:e=>{"use strict";e.exports=require("net")},1997:e=>{"use strict";e.exports=require("punycode")},2541:(e,t,s)=>{Promise.resolve().then(s.bind(s,5331))},3033:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-unit-async-storage.external.js")},3295:e=>{"use strict";e.exports=require("next/dist/server/app-render/after-task-async-storage.external.js")},3873:e=>{"use strict";e.exports=require("path")},4075:e=>{"use strict";e.exports=require("zlib")},4631:e=>{"use strict";e.exports=require("tls")},4735:e=>{"use strict";e.exports=require("events")},5331:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>r});let r=(0,s(413).registerClientReference)(function(){throw Error("Attempted to call the default export of \"/Users/zchester/Desktop/PersonaOps 2.0/assist-and-create-together/nextjs-app/src/app/intel/page.tsx\" from the server, but it's on the client. It's not possible to invoke a client function from the server, it can only be rendered as a Component or passed to props of a Client Component.")},"/Users/zchester/Desktop/PersonaOps 2.0/assist-and-create-together/nextjs-app/src/app/intel/page.tsx","default")},5511:e=>{"use strict";e.exports=require("crypto")},5591:e=>{"use strict";e.exports=require("https")},7910:e=>{"use strict";e.exports=require("stream")},9012:(e,t,s)=>{"use strict";s.r(t),s.d(t,{default:()=>T});var r=s(8625),i=s(4996),n=s(4715),a=s(565),o=s(7284);let c=i.forwardRef(({className:e,type:t,...s},i)=>(0,r.jsx)("input",{type:t,className:(0,o.cn)("flex h-10 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm",e),ref:i,...s}));c.displayName="Input";var l=s(3922);let p=(0,l.A)("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]);var d=s(3272);let u=(0,l.A)("TriangleAlert",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3",key:"wmoenq"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]);var g=s(5091),m=s(2377),y=s(1096);s(312);var _=s(7511),h=s(4152);let f=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("div",{className:"relative w-full overflow-auto",children:(0,r.jsx)("table",{ref:s,className:(0,o.cn)("w-full caption-bottom text-sm",e),...t})}));f.displayName="Table";let b=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("thead",{ref:s,className:(0,o.cn)("[&_tr]:border-b",e),...t}));b.displayName="TableHeader";let x=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("tbody",{ref:s,className:(0,o.cn)("[&_tr:last-child]:border-0",e),...t}));x.displayName="TableBody",i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("tfoot",{ref:s,className:(0,o.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",e),...t})).displayName="TableFooter";let v=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("tr",{ref:s,className:(0,o.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",e),...t}));v.displayName="TableRow";let j=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("th",{ref:s,className:(0,o.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",e),...t}));j.displayName="TableHead";let w=i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("td",{ref:s,className:(0,o.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",e),...t}));w.displayName="TableCell",i.forwardRef(({className:e,...t},s)=>(0,r.jsx)("caption",{ref:s,className:(0,o.cn)("mt-4 text-sm text-muted-foreground",e),...t})).displayName="TableCaption";let k=[{title:"Company Snapshot",description:"High-level overview of the company for executive context.",fields:{"Company Name":"company_overview.company_name",Website:"company_overview.website",Revenue:"company_overview.revenue","Employee Count (Global)":"company_overview.company_size","Employee Breakdown (By Region)":"company_overview.employees_global","Funding Status":"company_overview.funding_status","Industry Segments":"icp_and_buying.icp_demographics.industry","Overview Summary":"company_overview.overview"}},{title:"Firmographics",description:"Defines the ideal company profile based on structural attributes.",fields:{"Business Model":"icp_and_buying.firmographics.business_model","Sales Channels":"icp_and_buying.firmographics.sales_channels","Decision Making":"icp_and_buying.firmographics.decision_making","Growth Stage":"icp_and_buying.firmographics.growth_stage","Industry (Tags)":"icp_and_buying.icp_demographics.industry","Regions (Target Geography)":"icp_and_buying.icp_demographics.region","Revenue Range":"icp_and_buying.icp_demographics.revenue","Ideal Revenue":"icp_and_buying.icp_demographics.size.employees","Company Size (Employees)":"icp_and_buying.icp_demographics.size.employees","Size Sweet Spot":"icp_and_buying.icp_demographics.size.sweet_spot"}},{title:"Tech Stack & Integration Fit",description:"Common tech tools and platforms this ICP typically uses.",fields:{"Tech Stack Tags":"icp_and_buying.icp_demographics.tech_stack","CRM Platforms":"icp_and_buying.firmographics.business_model","ERP Systems":"icp_and_buying.icp_demographics.industry","Payment Gateways":"icp_and_buying.icp_demographics.revenue","Tech Partners":"icp_and_buying.buying_process.influencer_mapping"}},{title:"KPIs & Pain Points",description:"What this ICP cares about, struggles with, and how success is measured.",fields:{"Target KPIs":"icp_and_buying.kpis_targeted","Pain Points":"icp_and_buying.pain_points","Disqualification Red Flags":"icp_and_buying.red_flags"}},{title:"Buying Committee Breakdown",description:"Key roles involved in the decision-making process.",fields:{"Buyer Personas":"icp_and_buying.buying_committee_personas","Anti-Personas":"icp_and_buying.anti_personas","Influencer Mapping":"icp_and_buying.buying_process.influencer_mapping"}},{title:"Buying Process & Triggers",description:"How and when they buy, and what content or events influence purchase decisions.",fields:{"Buying Stages":"icp_and_buying.buying_process.buying_cycles.key_stages","Average Buying Cycle Length":"icp_and_buying.buying_process.buying_cycles.average_length","Trigger Events":"icp_and_buying.buying_process.trigger_events","Content Sought":"icp_and_buying.buying_process.content_sought"}},{title:"Product & GTM Positioning",description:"What products are offered and how they are positioned for this ICP.",fields:{"Core Product Suite":"icp_and_buying.firmographics.growth_stage","Main Products":"icp_and_buying.firmographics.business_model","Modules & Use Cases":"icp_and_buying.icp_demographics.tech_stack","Target Market":"icp_and_buying.icp_demographics.industry","Unique Selling Points":"icp_and_buying.kpis_targeted","Value Proposition by Segment":"icp_and_buying.icp_demographics.revenue","Market Trends":"icp_and_buying.buying_process.trigger_events","GTM Messaging: CEO":"icp_and_buying.firmographics.decision_making","GTM Messaging: CMO":"icp_and_buying.buying_process.content_sought","GTM Messaging: CTO":"icp_and_buying.icp_demographics.tech_stack"}},{title:"Product Features & Enterprise Readiness",description:"Technical maturity, scalability, and support posture for larger orgs.",fields:{"API Type":"icp_and_buying.icp_demographics.tech_stack",Customization:"icp_and_buying.firmographics.business_model","Developer Tools":"icp_and_buying.buying_process.content_sought",Documentation:"icp_and_buying.kpis_targeted","App Marketplace":"icp_and_buying.icp_demographics.industry",Hosting:"icp_and_buying.icp_demographics.region",Performance:"icp_and_buying.pain_points",Uptime:"icp_and_buying.buying_process.buying_cycles.average_length","Security Certifications":"icp_and_buying.red_flags","Security Features":"icp_and_buying.anti_personas","Support Channels":"icp_and_buying.buying_process.influencer_mapping",SLA:"icp_and_buying.firmographics.sales_channels"}},{title:"Competitive Landscape",description:"Competitor fit and positioning across different market segments.",fields:{"SMB Competitors":"icp_and_buying.icp_demographics.industry","SMB Feature Comparison":"icp_and_buying.firmographics.business_model","Mid-Market Competitors":"icp_and_buying.icp_demographics.tech_stack","Mid-Market Feature Comparison":"icp_and_buying.kpis_targeted","Enterprise Competitors":"icp_and_buying.icp_demographics.size.employees","Enterprise Feature Comparison":"icp_and_buying.firmographics.growth_stage","Threats - SMB":"icp_and_buying.red_flags","Threats - MM":"icp_and_buying.anti_personas","Threats - Enterprise":"icp_and_buying.buying_process.trigger_events","Loss/Win Factors":"icp_and_buying.buying_process.content_sought","Review Plan":"icp_and_buying.buying_process.buying_cycles.key_stages"}},{title:"Case Studies & Proof Points",description:"Client examples and preferred content types for social proof and education.",fields:{"Client Logos + Outcomes":"company_overview.key_contacts","Preferred Content Types":"icp_and_buying.buying_process.content_sought","Objection Handlers":"icp_and_buying.red_flags"}},{title:"ICP Fit Matrix",description:"Scoring criteria to determine fit, neutral, or disqualified targets.",fields:{"ICP Attributes Matrix":"icp_and_buying.firmographics"}}],C=({reportData:e})=>e?(0,r.jsx)("div",{className:"space-y-6",children:k.map((t,s)=>(0,r.jsxs)(a.Zp,{className:"w-full",children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsx)(a.ZB,{children:t.title}),(0,r.jsx)(a.BT,{children:t.description})]}),(0,r.jsx)(a.Wu,{children:(0,r.jsxs)(f,{children:[(0,r.jsx)(b,{children:(0,r.jsxs)(v,{children:[(0,r.jsx)(j,{className:"w-1/3",children:"Field"}),(0,r.jsx)(j,{children:"Value"})]})}),(0,r.jsx)(x,{children:Object.entries(t.fields).map(([t,s])=>{let i=function(e,t){if(e&&t)return t.split(".").reduce((e,t)=>e&&void 0!==e[t]?e[t]:void 0,e)}(e,s);return(0,r.jsxs)(v,{children:[(0,r.jsx)(w,{className:"font-medium",children:t}),(0,r.jsx)(w,{className:"whitespace-pre-wrap",children:function(e,t){return null==e?"N/A":Array.isArray(e)?0===e.length?"None":"object"==typeof e[0]?e.map((e,t)=>e.role?`${e.role}${e.responsibilities?` (${Array.isArray(e.responsibilities)?e.responsibilities.join(", "):e.responsibilities})`:""}`:e.type?`${e.type}${e.characteristics?` (${Array.isArray(e.characteristics)?e.characteristics.join(", "):e.characteristics})`:""}`:e.name&&e.title?`${e.name} - ${e.title}`:JSON.stringify(e)).join("; "):e.join(", "):"object"==typeof e?e.external&&e.internal?`External: ${Array.isArray(e.external)?e.external.join(", "):e.external}; Internal: ${Array.isArray(e.internal)?e.internal.join(", "):e.internal}`:e.ideal&&e.range?`Ideal: ${e.ideal}, Range: ${e.range}`:e.growth_stage&&e.business_model?`Growth Stage: ${Array.isArray(e.growth_stage)?e.growth_stage.join(", "):e.growth_stage}, Business Model: ${Array.isArray(e.business_model)?e.business_model.join(", "):e.business_model}, Sales Channels: ${Array.isArray(e.sales_channels)?e.sales_channels.join(", "):e.sales_channels}, Decision Making: ${e.decision_making}`:JSON.stringify(e):String(e)}(i,0)})]},t)})})]})})]},s))}):(0,r.jsx)("div",{children:"No report data available"}),S=({reportData:e})=>{console.log("[CanonicalReportRenderer] Received reportData:",e);let t=function(e){if(!e)return{};if(e.llm_output){let t=e.llm_output;if("string"==typeof t)try{t=JSON.parse(t)}catch(t){return console.error("[CanonicalReportRenderer] Failed to parse llm_output:",t),e}return t}return e.merged?e.merged:e}(e);return console.log("[CanonicalReportRenderer] Extracted canonical data:",t),(0,r.jsx)(C,{reportData:t})};var P=s(2282);let N=({reports:e,selectedId:t,onSelect:s})=>e.length?(0,r.jsx)("div",{className:"flex flex-wrap gap-2 mb-4",children:e.map(e=>(0,r.jsx)(P.w,{report:e,selected:t===e.id,onClick:()=>s(e)},e.id))}):(0,r.jsx)("p",{className:"text-gray-500 mt-2",children:"No companies analyzed yet. Use Company Analyzer first."}),A=e=>"string"==typeof e?e:Array.isArray(e)?e.map(A).join(", "):"object"==typeof e&&null!==e?JSON.stringify(e):"number"==typeof e||"boolean"==typeof e?String(e):"",R=()=>{let[e,t]=(0,i.useState)(""),{toast:s}=(0,g.dj)(),{setResearch:o}=(0,m.P)(),l=(0,y.useUser)(),f=(0,y.useSession)(),{data:b,loading:x,retry:v}=(0,_.$)(),[j,w]=(0,i.useState)([]),[k,C]=(0,i.useState)(null),[P,A]=(0,i.useState)(null),[R,T]=(0,i.useState)(!1),[M,E]=(0,i.useState)(""),[z,q]=(0,i.useState)([]),[F,I]=(0,i.useState)(!1),[O,$]=(0,i.useState)([]);(0,i.useEffect)(()=>{l?.id&&(0,h.Ez)({userId:l.id}).then(e=>{w(e),e.length>0&&C(e[0].id)})},[l?.id]),(0,i.useEffect)(()=>{!async function(){if(!P||!k||!l?.id)return q([]);let e=P.company_url||P.companyUrl||P.llm_output&&("string"==typeof P.llm_output?JSON.parse(P.llm_output).company_url:P.llm_output.company_url);if(!e)return q([]);I(!0);try{let t=await (0,h.ME)({companyUrl:e,userId:l.id});q(t)}catch(e){q([])}finally{I(!1)}}()},[P,k,l?.id]);let D=async t=>{if(t&&"function"==typeof t.preventDefault&&t.preventDefault(),console.log("[CompanyAnalyzer] handleSubmit triggered",{url:e,user:l,session:f}),!f?.access_token){s({title:"Auth Error",description:"No access token found. Please log in again.",variant:"destructive"}),console.error("[CompanyAnalyzer] No access token found",{user:l,session:f});return}if(!e.trim())return void s({title:"Error",description:"Please enter a company URL",variant:"destructive"});let r=function(e){let t=e.trim().toLowerCase();return t=(t=(t=t.replace(/^https?:\/\//,"")).replace(/^www\./,"")).replace(/\/$/,""),`https://${t}`}(e);A(null),T(!0),E("Company Overview...");let i=[];i.push(setTimeout(()=>E("Market Intelligence..."),4e3)),i.push(setTimeout(()=>E("Tech Stack Analysis..."),13e3)),i.push(setTimeout(()=>E("Sales & GTM Research..."),33e3)),i.push(setTimeout(()=>E("Finalizing Report..."),45e3));try{console.log("=== Starting Company Analysis ==="),console.log("URL:",r),console.log("User ID:",l?.id),console.log("Session token available:",!!f?.access_token);let e=await fetch("/api/company-analyze",{method:"POST",headers:{"Content-Type":"application/json",...f?.access_token?{Authorization:`Bearer ${f.access_token}`}:{}},body:JSON.stringify({url:r})});if(!e.ok){let t=`LLM failed: ${e.status}`;try{t=(await e.json()).error||t}catch{}throw Error(t)}let t=await e.json(),n=e.ok?null:{message:t.error||"Analysis request failed"};if(console.log("=== Supabase Function Response ==="),console.log("Data:",t),console.log("Error:",n),n)throw console.error("Supabase function error details:",n),Error(n.message||"Analysis request failed");if(t?.success&&t?.output){let e=t.output;if(Array.isArray(t.output))if(t.output.length>0)e=t.output[0];else{console.warn("[WARN] data.output is an empty array."),s({title:"Analysis Error",description:"No report returned from analysis.",variant:"destructive"}),T(!1),E(""),i.forEach(clearTimeout);return}let r=e;if(e.llm_output&&(r=e.llm_output,"string"==typeof r))try{r=JSON.parse(r)}catch{}A(r),w(t=>[r,...t.filter(t=>t.id!==e.id)]),C(e.id||null),o({companyAnalysis:r,isCached:!1,timestamp:new Date().toISOString()}),v(),s({title:"Analysis Complete",description:`Successfully analyzed ${r.company_name||r.companyName}`})}else throw console.error("Analysis failed - no success flag or analysis data"),Error(t?.error||"Analysis failed - no data returned")}catch(e){console.error("=== Analysis Error ==="),console.error("Error type:",typeof e),console.error("Error message:",e.message),console.error("Full error:",e),s({title:"Analysis Failed",description:e.message||"Failed to analyze company. Please check the URL and try again.",variant:"destructive"})}finally{T(!1),E(""),i.forEach(clearTimeout)}};return(0,r.jsxs)("div",{className:"space-y-8",children:[(0,r.jsxs)(a.Zp,{children:[(0,r.jsxs)(a.aR,{children:[(0,r.jsxs)(a.ZB,{className:"flex items-center gap-2 text-2xl font-bold",children:[(0,r.jsx)(p,{className:"h-6 w-6 text-primary"}),"Company Analysis"]}),(0,r.jsx)(a.BT,{className:"text-base",children:"Enter a company URL to generate comprehensive business intelligence using our 5-phase research process"})]}),(0,r.jsxs)(a.Wu,{children:[j.length>0&&(0,r.jsx)(N,{reports:j,selectedId:k,onSelect:e=>{C(e.id),A(e)}}),(0,r.jsxs)("form",{onSubmit:D,className:"space-y-4",children:[(0,r.jsxs)("div",{className:"space-y-2",children:[(0,r.jsx)("label",{htmlFor:"url",className:"text-sm font-medium",children:"Company URL"}),(0,r.jsx)(c,{id:"url",type:"text",placeholder:"e.g., outbound.ai, notion.so, zapier.com",value:e,onChange:e=>t(e.target.value),onKeyPress:e=>{"Enter"!==e.key||e.shiftKey||(e.preventDefault(),D(e))},disabled:R,className:"text-base",autoComplete:"off","aria-label":"Company URL"})]}),(0,r.jsx)(n.$,{type:"submit",disabled:R||!e.trim(),className:"w-full",children:R?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.A,{className:"mr-2 h-4 w-4 animate-spin"}),M||"Analyzing..."]}):l?(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(p,{className:"mr-2 h-4 w-4"}),"Analyze Company"]}):(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(u,{className:"mr-2 h-4 w-4"}),"Please log in"]})})]})]})]}),0===j.length?(0,r.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"No company analysis reports found. Run an analysis first."}):(0,r.jsx)("div",{className:"space-y-8",children:P&&k&&"object"==typeof P?(0,r.jsx)(S,{reportData:P}):(0,r.jsx)("div",{className:"text-center text-muted-foreground py-8",children:"Select a report to view details"})})]})};function T(){return(0,r.jsx)(R,{})}},9037:(e,t,s)=>{Promise.resolve().then(s.bind(s,9012))},9121:e=>{"use strict";e.exports=require("next/dist/server/app-render/action-async-storage.external.js")},9294:e=>{"use strict";e.exports=require("next/dist/server/app-render/work-async-storage.external.js")},9428:e=>{"use strict";e.exports=require("buffer")},9551:e=>{"use strict";e.exports=require("url")}};var t=require("../../webpack-runtime.js");t.C(e);var s=e=>t(t.s=e),r=t.X(0,[683,839,808,117,560],()=>s(669));module.exports=r})();